<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Login com Google - Sistema RH</title>
</head>

<body>
  <h1>Sistema RH - Login</h1>

  <!-- Área de Login -->
  <div id="login-area">
    <button id="btnLoginGoogle">Entrar com Google</button>
  </div>

  <!-- Área quando usuário está logado -->
  <div id="user-area" style="display:none;">
    <p>Bem-vindo, <span id="user-name"></span>!</p>
    <p>Email: <span id="user-email"></span></p>
    <img id="user-photo" width="90" style="border-radius:50%;">
    <br><br>
    <button id="btnLogout">Sair</button>
  </div>

  <script type="module">
    /* ============================
       IMPORTAÇÕES DO FIREBASE
       ============================ */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut }
      from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

    /* ============================
       CONFIGURAÇÃO DO SEU PROJETO
       ============================ */
    const firebaseConfig = {
      apiKey: "AIzaSyDTyR6gVjAzC8BA3Y223v6819Pdwjsy8bQ",
      authDomain: "app-rh-hope.firebaseapp.com",
      projectId: "app-rh-hope",
      storageBucket: "app-rh-hope.firebasestorage.app",
      messagingSenderId: "1060676399696",
      appId: "1:1060676399696:web:edb5e407253bd982709755",
      measurementId: "G-64CT6CWBTW"
    };

    /* ============================
       INICIALIZA O FIREBASE
       ============================ */
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    /* ============================
       LOGIN
       ============================ */
    document.getElementById("btnLoginGoogle").onclick = function () {
      signInWithPopup(auth, provider)
        .then((result) => {
          console.log("Usuário logado:", result.user);
        })
        .catch((error) => {
          console.error("Erro no login:", error);
          alert("Erro no login: " + error.message);
        });
    };

    /* ============================
       MONITORAR LOGIN
       ============================ */
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // Se está logado
        document.getElementById("login-area").style.display = "none";
        document.getElementById("user-area").style.display = "block";

        document.getElementById("user-name").textContent = user.displayName;
        document.getElementById("user-email").textContent = user.email;
        document.getElementById("user-photo").src = user.photoURL;

      } else {
        // Se NÃO está logado
        document.getElementById("login-area").style.display = "block";
        document.getElementById("user-area").style.display = "none";
      }
    });

    /* ============================
       LOGOUT
       ============================ */
    document.getElementById("btnLogout").onclick = function () {
      signOut(auth);
    };
  </script>

</body>
</html>
